{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>editar historia clinica | Oral Life</title>
    <link rel="stylesheet" href="{% static 'css/auxiliar_historial_edit.css' %}">
</head>
<body>
    <nav class="navbar">
    <div class="navbar-left">
        <img src="{% static 'imagenes/logo-oral-life.jpg' %}" alt="Logo" class="logo">
    </div>
    <ul class="navbar-links">
        <li><a href="{% url 'auxiliar_home' %}">Inicio</a></li>
        <li><a href="{% url 'auxiliar_citas' %}">Citas</a></li>
        <li><a href="{% url 'crear_historia_clinica' %}">Historia Clínica</a></li>
        <li><a href="{% url 'lista_historias_clinicas' %}">Lista Historias</a></li>
        <li><a href="{% url 'lista_chats' %}" class="active">Mensajes</a></li>
    </ul>
    <form method="post" action="{% url 'logout' %}" class="logout-form">
        {% csrf_token %}
        <button type="submit" class="logout-btn">Cerrar sesión</button>
    </form>
    </nav>
<main class="container">
        <h2>Editar Historia Clínica</h2>
        <h3 class="paciente-nombre">{{ historia.paciente.nombre }}</h3>

        <form method="post" class="historia-form">
            {% csrf_token %}

            <details open>
                <summary>Datos personales del paciente</summary>
                <div class="section-grid">
                    <label>Nombre y apellidos<input type="text" name="nombre" value="{{ historia.nombre }}"></label>
                    <label>Fecha de nacimiento<input type="date" name="fecha_nacimiento" value="{{ historia.fecha_nacimiento|date:'Y-m-d' }}"></label>
                    <label>Edad<input type="number" name="edad" value="{{ historia.edad }}"></label>
                    <label>Sexo
                        <select name="sexo">
                            <option value="">Seleccione</option>
                            <option value="Masculino" {% if historia.sexo == "Masculino" %}selected{% endif %}>Masculino</option>
                            <option value="Femenino" {% if historia.sexo == "Femenino" %}selected{% endif %}>Femenino</option>
                        </select>
                    </label>
                    <label>Tipo de identificación<input type="text" name="tipo_id" value="{{ historia.tipo_id }}"></label>
                    <label>N° de identificación<input type="text" name="numero_id" value="{{ historia.numero_id }}"></label>
                    <label>Estado civil<input type="text" name="estado_civil" value="{{ historia.estado_civil }}"></label>
                    <label>Dirección<input type="text" name="direccion" value="{{ historia.direccion }}"></label>
                    <label>Teléfono<input type="text" name="telefono" value="{{ historia.telefono }}"></label>
                    <label>Ocupación<input type="text" name="ocupacion" value="{{ historia.ocupacion }}"></label>
                    <label>Nivel educativo<input type="text" name="nivel_educativo" value="{{ historia.nivel_educativo }}"></label>
                    <label>Nivel socioeconómico<input type="text" name="nivel_socioeconomico" value="{{ historia.nivel_socioeconomico }}"></label>
                    <label>Nombre del contacto de emergencia<input type="text" name="contacto_emergencia" value="{{ historia.contacto_emergencia }}"></label>
                    <label>Teléfono del contacto de emergencia<input type="text" name="telefono_emergencia" value="{{ historia.telefono_emergencia }}"></label>
                </div>
            </details>

            <details open>
                <summary>Motivo de consulta</summary>
                <textarea name="motivo_consulta" rows="3">{{ historia.motivo_consulta }}</textarea>
            </details>

            <details>
                <summary>Historia de la enfermedad actual</summary>
                <textarea name="historia_enfermedad" rows="4">{{ historia.historia_enfermedad }}</textarea>
            </details>

            <details>
                <summary>Antecedentes</summary>
                <textarea name="antecedentes_familiares" rows="3" placeholder="Familiares">{{ historia.antecedentes_familiares }}</textarea>
                <textarea name="antecedentes_personales" rows="3" placeholder="Personales">{{ historia.antecedentes_personales }}</textarea>
                <textarea name="antecedentes_tox" rows="3" placeholder="Toxicológicos">{{ historia.antecedentes_tox }}</textarea>
            </details>

            <details>
                <summary>Examen físico y tejidos blandos</summary>
                <textarea name="examen_fisico" rows="4">{{ historia.examen_fisico }}</textarea>
            </details>

            <details>
                <summary>Odontograma</summary>
                <div class="odontograma-section">
                    <img src="{% static 'imagenes/odontograma.png' %}" alt="Odontograma" class="odontograma-img">
                    <label>Observaciones:
                        <textarea name="odontograma_detalle" rows="4">{{ historia.odontograma_detalle }}</textarea>
                    </label>
                </div>
            </details>

            <details>
                <summary>Análisis periodontal</summary>
                <textarea name="analisis_periodontal" rows="3">{{ historia.analisis_periodontal }}</textarea>
            </details>

            <details>
                <summary>Índice de placa bacteriana</summary>
                <label>Higiene oral:
                    <select name="higiene">
                        <option value="Buena" {% if historia.higiene == "Buena" %}selected{% endif %}>Buena</option>
                        <option value="Regular" {% if historia.higiene == "Regular" %}selected{% endif %}>Regular</option>
                        <option value="Mala" {% if historia.higiene == "Mala" %}selected{% endif %}>Mala</option>
                    </select>
                </label>
            </details>

            <details>
                <summary>Diagnóstico</summary>
                <textarea name="diagnostico" rows="3">{{ historia.diagnostico }}</textarea>
            </details>

            <details>
                <summary>Pronóstico</summary>
                <label><input type="radio" name="pronostico" value="bueno" {% if historia.pronostico == "bueno" %}checked{% endif %}> Bueno</label>
                <label><input type="radio" name="pronostico" value="regular" {% if historia.pronostico == "regular" %}checked{% endif %}> Regular</label>
                <label><input type="radio" name="pronostico" value="malo" {% if historia.pronostico == "malo" %}checked{% endif %}> Malo</label>
                <label><input type="radio" name="pronostico" value="reservado" {% if historia.pronostico == "reservado" %}checked{% endif %}> Reservado</label>
            </details>

            <details>
                <summary>Plan de tratamiento</summary>
                <textarea name="plan_tratamiento" rows="4">{{ historia.plan_tratamiento }}</textarea>
            </details>

            <details>
                <summary>Firmas</summary>
                <div class="grid">
                    <label>Firma del paciente<input type="text" name="firma_paciente" value="{{ historia.firma_paciente }}"></label>
                    <label>Firma del odontólogo<input type="text" name="firma_odontologo" value="{{ historia.firma_odontologo }}"></label>
                    <label>Fecha<input type="date" name="fecha_firma" value="{{ historia.fecha_firma|date:'Y-m-d' }}"></label>
                </div>
            </details>

            <div class="form-actions">
                <button type="submit" class="btn-guardar">Guardar Cambios</button>
                <a href="{% url 'lista_historias_clinicas' %}" class="btn-cancelar">Cancelar</a>
            </div>
        </form>
    </main>
</body>
</html>